!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@covalent/markdown"),require("@angular/material/button"),require("@angular/material/tooltip"),require("@angular/material/list"),require("@angular/material/icon"),require("@angular/material/progress-bar"),require("@covalent/flavored-markdown"),require("@covalent/core/dialogs")):"function"==typeof define&&define.amd?define("@covalent/markdown-navigator",["exports","@angular/core","@angular/common","@covalent/markdown","@angular/material/button","@angular/material/tooltip","@angular/material/list","@angular/material/icon","@angular/material/progress-bar","@covalent/flavored-markdown","@covalent/core/dialogs"],e):e(((t=t||self).covalent=t.covalent||{},t.covalent["markdown-navigator"]={}),t.ng.core,t.ng.common,t.covalent.markdown,t.ng.material.button,t.ng.material.tooltip,t.ng.material.list,t.ng.material.icon,t.ng.material["progress-bar"],t.flavoredMarkdown,t.covalent.core.dialogs)}(this,(function(t,e,o,n,r,a,i,l,s,c,d){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var u=function(){return(u=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function g(t,e){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}function p(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,a=o.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var f={goHome:"Go home",goBack:"Go back",emptyState:"No item(s) to display"};function b(t,e){return t===e}var w=function(){function t(t,e){this._markdownUrlLoaderService=t,this._changeDetectorRef=e,this.historyStack=[],this.currentMenuItems=[],this.loading=!1}return t.prototype.clickListener=function(t){var e,o=t.srcElement;o.matches("a[href]")&&(e=o,!n.isAnchorLink(e)&&e.pathname.endsWith(".md"))&&this.handleLinkClick(t)},Object.defineProperty(t.prototype,"showGoBackButton",{get:function(){return this.historyStack.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHomeButton",{get:function(){return this.historyStack.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.showHomeButton||this.showGoBackButton||!!this.currentItemTitle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return this.currentMenuItems&&this.currentMenuItems.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTdMarkdownLoader",{get:function(){return!!this.currentMarkdownItem&&!!this.currentMarkdownItem.url&&!this.showTdMarkdown},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTdMarkdown",{get:function(){return!!this.currentMarkdownItem&&!!this.currentMarkdownItem.markdownString},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpOptions",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.httpOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markdownString",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.markdownString},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.anchor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showEmptyState",{get:function(){return!this.items||this.items.length<1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"goHomeLabel",{get:function(){return this.labels&&this.labels.goHome||f.goHome},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"goBackLabel",{get:function(){return this.labels&&this.labels.goBack||f.goBack},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emptyStateLabel",{get:function(){return this.labels&&this.labels.emptyState||f.emptyState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentItemTitle",{get:function(){return this.historyStack.length<1?"":this.currentMarkdownItem?this.getTitle(this.currentMarkdownItem):this.historyStack.length>0?this.getTitle(this.historyStack[this.historyStack.length-1]):""},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){t.items&&(this.reset(),this.items&&this.startAt&&this._jumpTo(this.startAt))},t.prototype.reset=function(){!this.items||1!==this.items.length||this.items[0].children&&0!==this.items[0].children.length?(this.currentMenuItems=this.items,this.currentMarkdownItem=void 0):(this.currentMenuItems=[],this.currentMarkdownItem=this.items[0]),this.historyStack=[],this._changeDetectorRef.markForCheck()},t.prototype.goBack=function(){if(this.historyStack.length>1){var t=this.historyStack[this.historyStack.length-2];t.children&&t.children.length>0?(this.currentMenuItems=t.children,this.currentMarkdownItem=void 0):(this.currentMenuItems=[],this.currentMarkdownItem=t),this.historyStack=this.historyStack.slice(0,-1)}else this.reset();this._changeDetectorRef.markForCheck()},t.prototype.handleItemSelected=function(t){this.historyStack=m(this.historyStack,[t]),this.currentMenuItems=t.children,this.currentMarkdownItem=t,this._changeDetectorRef.markForCheck()},t.prototype.getTitle=function(t){if(t)return(n.removeLeadingHash(t.anchor)||t.title||function(t){if(t){var e=new URL(t);if(e.hash)return n.removeLeadingHash(e.hash);var o=e.pathname.split("/");return o[o.length-1].replace(/\.[^/.]+$/,"")}}(t.url)||function(t){if(t){var e=t.split(/[\r\n]+/).find((function(t){return!!t}));return n.removeLeadingHash(e).trim()}}(t.markdownString)||"").trim()},t.prototype.getIcon=function(t){if(t)return t.icon||"subject"},t.prototype._jumpTo=function(t){var e=this;(this.reset(),this.items&&this.items.length>0)&&(function t(e,o,n){var r,a;if(e)try{for(var i=h(e),l=i.next();!l.done;l=i.next()){var s=l.value;if(n(s,o))return[s];var c=t(s.children,o,n);if(c)return m([s],c)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}}(this.items,t,this.compareWith||b)||[]).forEach((function(t){return e.handleItemSelected(t)}));this._changeDetectorRef.markForCheck()},t.prototype.handleLinkClick=function(t){return e=this,o=void 0,r=function(){var e,o,n;return g(this,(function(r){switch(r.label){case 0:t.preventDefault(),e=t.target,o=new URL(e.href),this.loading=!0,this._changeDetectorRef.markForCheck(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._markdownUrlLoaderService.load(o.href)];case 2:return n=r.sent(),this.handleItemSelected({markdownString:n,url:o.href}),this.markdownWrapper.nativeElement.scrollTop=0,[3,5];case 3:return r.sent(),window.open(o.href,"_blank").focus(),[3,5];case 4:return this.loading=!1,[7];case 5:return this._changeDetectorRef.markForCheck(),[2]}}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function l(t){try{s(r.throw(t))}catch(t){a(t)}}function s(e){e.done?t(e.value):new n((function(t){t(e.value)})).then(i,l)}s((r=r.apply(e,o||[])).next())}));var e,o,n,r},t.decorators=[{type:e.Component,args:[{selector:"td-markdown-navigator",template:'<ng-container *ngIf="!showEmptyState">\n  <mat-progress-bar *ngIf="loading" mode="indeterminate" color="accent"></mat-progress-bar>\n\n  <ng-container *ngIf="showHeader">\n    <div [style.display]="\'flex\'">\n      <button\n        *ngIf="showHomeButton"\n        mat-icon-button\n        [matTooltip]="goHomeLabel"\n        (click)="reset()"\n        [attr.data-test]="\'home-button\'"\n      >\n        <mat-icon [attr.aria-label]="goHomeLabel">\n          home\n        </mat-icon>\n      </button>\n\n      <button\n        *ngIf="showGoBackButton"\n        mat-icon-button\n        [matTooltip]="goBackLabel"\n        (click)="goBack()"\n        [attr.data-test]="\'back-button\'"\n      >\n        <mat-icon [attr.aria-label]="goBackLabel">\n          arrow_back\n        </mat-icon>\n      </button>\n      <span flex *ngIf="currentItemTitle" class="mat-body-2 title truncate" [attr.data-test]="\'title\'">\n        {{ currentItemTitle }}\n      </span>\n    </div>\n\n    <mat-divider [style.position]="\'relative\'"></mat-divider>\n  </ng-container>\n\n  <div class="scroll-area">\n    <div *ngIf="showMenu" class="td-markdown-list">\n      <mat-action-list>\n        <button\n          *ngFor="let item of currentMenuItems"\n          (click)="handleItemSelected(item)"\n          mat-list-item\n          [matTooltip]="getTitle(item)"\n          matTooltipPosition="before"\n          matTooltipShowDelay="500"\n        >\n          <mat-icon matListIcon>\n            {{ getIcon(item) }}\n          </mat-icon>\n          <span matLine class="truncate">\n            {{ getTitle(item) }}\n          </span>\n          <span matLine class="truncate">{{ item.description }}</span>\n          <mat-divider></mat-divider>\n        </button>\n      </mat-action-list>\n    </div>\n\n    <div *ngIf="showTdMarkdownLoader || showTdMarkdown" class="markdown-wrapper" #markdownWrapper>\n      <td-flavored-markdown-loader\n        *ngIf="showTdMarkdownLoader"\n        [url]="url"\n        [httpOptions]="httpOptions"\n        [anchor]="anchor"\n      ></td-flavored-markdown-loader>\n\n      <td-flavored-markdown\n        *ngIf="showTdMarkdown"\n        [content]="markdownString"\n        [hostedUrl]="url"\n        [anchor]="anchor"\n      ></td-flavored-markdown>\n    </div>\n  </div>\n</ng-container>\n\n<div *ngIf="showEmptyState" layout="column" layout-align="center center" class=" empty-state">\n  <mat-icon matListAvatar>subject</mat-icon>\n  <h2>{{ emptyStateLabel }}</h2>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[":host{position:relative;height:100%;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host .scroll-area{min-height:1px;overflow-y:auto;-webkit-box-flex:1;-ms-flex:1;flex:1;box-sizing:border-box}:host .markdown-wrapper{padding:16px 16px 0}:host .td-markdown-list>.mat-list{padding-top:0}:host td-flavored-markdown-loader ::ng-deep .mat-progress-bar{top:0;left:0;right:0;position:absolute}:host .title{display:inline-block;vertical-align:middle;margin:8px 0;padding-left:16px}.truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.empty-state{padding:32px}.empty-state mat-icon{font-size:4em}"]}]}],t.ctorParameters=function(){return[{type:n.TdMarkdownLoaderService},{type:e.ChangeDetectorRef}]},t.propDecorators={items:[{type:e.Input}],labels:[{type:e.Input}],startAt:[{type:e.Input}],compareWith:[{type:e.Input}],markdownWrapper:[{type:e.ViewChild,args:["markdownWrapper"]}],clickListener:[{type:e.HostListener,args:["click",["$event"]]}]},t}();var k={title:"Help",close:"Close",dock:"Dock",unDock:"Undock"},y=function(){function t(){this.toolbarColor="primary",this.docked=!1,this.closed=new e.EventEmitter,this.dockToggled=new e.EventEmitter}return Object.defineProperty(t.prototype,"markdownNavigatorLabels",{get:function(){if(this.labels){var t=this.labels;return{goHome:t.goHome,goBack:t.goBack,emptyState:t.emptyState}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleLabel",{get:function(){return this.labels&&this.labels.title||k.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeLabel",{get:function(){return this.labels&&this.labels.close||k.close},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toggleDockedStateLabel",{get:function(){return this.docked?this.labels&&this.labels.unDock||k.unDock:this.labels&&this.labels.dock||k.dock},enumerable:!0,configurable:!0}),t.prototype.toggleDockedState=function(){this.dockToggled.emit(this.docked)},t.decorators=[{type:e.Component,args:[{selector:"td-markdown-navigator-window",template:'<td-window-dialog\n  [toolbarColor]="toolbarColor"\n  [docked]="docked"\n  [title]="titleLabel"\n  [toggleDockedStateLabel]="toggleDockedStateLabel"\n  [closeLabel]="closeLabel"\n  (dockToggled)="toggleDockedState()"\n  (closed)="closed.emit()"\n>\n  <td-markdown-navigator\n    [items]="items"\n    [labels]="markdownNavigatorLabels"\n    [style.display]="docked ? \'none\' : \'inherit\'"\n    [startAt]="startAt"\n    [compareWith]="compareWith"\n  ></td-markdown-navigator>\n</td-window-dialog>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[":host{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}td-markdown-navigator{height:calc(100% - 56px)}"]}]}],t.propDecorators={items:[{type:e.Input}],labels:[{type:e.Input}],toolbarColor:[{type:e.Input}],startAt:[{type:e.Input}],compareWith:[{type:e.Input}],docked:[{type:e.Input}],closed:[{type:e.Output}],dockToggled:[{type:e.Output}]},t}();var v={bottom:"0px",right:"0px"},D={hasBackdrop:!1,closeOnNavigation:!0,panelClass:["td-window-dialog"],position:v,height:"75vh",width:"360px",maxWidth:"100vw"};var I=function(){function t(t,e,o){this._tdDialogService=t,this._document=e,this.rendererFactory=o,this.markdownNavigatorWindowDialog=void 0,this.markdownNavigatorWindowDialogsOpen=0,this._renderer2=o.createRenderer(void 0,void 0)}return t.prototype.open=function(t){var e=this;this.close();var o=m(D.panelClass);t.dialogConfig&&t.dialogConfig.panelClass&&(o=Array.isArray(t.dialogConfig.panelClass)?m(t.dialogConfig.panelClass):[t.dialogConfig.panelClass]);var n=u(u(u({},D),t.dialogConfig),{panelClass:o}),r=this._tdDialogService.openDraggable({component:y,config:n,dragHandleSelectors:[".td-window-dialog-toolbar"],draggableClass:"td-draggable-markdown-navigator-window"}),a=r.matDialogRef,i=r.dragRefSubject;return this.markdownNavigatorWindowDialog=a,this.markdownNavigatorWindowDialog.componentInstance.items=t.items,this.markdownNavigatorWindowDialog.componentInstance.labels=t.labels,this.markdownNavigatorWindowDialog.componentInstance.startAt=t.startAt,this.markdownNavigatorWindowDialog.componentInstance.compareWith=t.compareWith,this.markdownNavigatorWindowDialog.componentInstance.toolbarColor="toolbarColor"in t?t.toolbarColor:"primary",this.markdownNavigatorWindowDialogsOpen++,i.subscribe((function(t){e.dragRef=t,e.resizableDraggableDialog=new d.ResizableDraggableDialog(e._document,e._renderer2,e.markdownNavigatorWindowDialog,e.dragRef)})),this._handleEvents(),this.markdownNavigatorWindowDialog},t.prototype.close=function(){this.markdownNavigatorWindowDialog&&(this.resizableDraggableDialog&&this.resizableDraggableDialog.detach(),this.markdownNavigatorWindowDialog.close())},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.markdownNavigatorWindowDialogsOpen>0},enumerable:!0,configurable:!0}),t.prototype._handleEvents=function(){var t,e,o=this;this.markdownNavigatorWindowDialog.componentInstance.closed.subscribe((function(){return o.close()})),this.markdownNavigatorWindowDialog.componentInstance.dockToggled.subscribe((function(n){n?(o.markdownNavigatorWindowDialog.componentInstance.docked=!1,o.markdownNavigatorWindowDialog.updateSize(e.width,e.height),o.markdownNavigatorWindowDialog.updatePosition({top:"0px",right:"0px",bottom:"0px",left:"0px"}),o.dragRef.setFreeDragPosition(t),o.dragRef.disabled=!1,o.resizableDraggableDialog.attach()):(e=o._getDialogSize(o.markdownNavigatorWindowDialog),t=o.dragRef.getFreeDragPosition(),o.markdownNavigatorWindowDialog.componentInstance.docked=!0,o.markdownNavigatorWindowDialog.updateSize("360px","56px"),o.markdownNavigatorWindowDialog.updatePosition(v),o.dragRef.reset(),o.dragRef.disabled=!0,o.resizableDraggableDialog.detach())})),this.markdownNavigatorWindowDialog.afterClosed().toPromise().then((function(){o.markdownNavigatorWindowDialogsOpen--}))},t.prototype._getDialogSize=function(t){var e=getComputedStyle(this._document.getElementById(t.id).parentElement);return{width:e.width,height:e.height}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:d.TdDialogService},{type:void 0,decorators:[{type:e.Inject,args:[o.DOCUMENT]}]},{type:e.RendererFactory2}]},t}();var S=function(){function t(t){this._markdownNavigatorWindowService=t,this.disabled=!1}return t.prototype.click=function(){this.disabled||this._markdownNavigatorWindowService.open(this.config)},t.decorators=[{type:e.Directive,args:[{selector:"[tdMarkdownNavigatorWindow]"}]}],t.ctorParameters=function(){return[{type:I}]},t.propDecorators={config:[{type:e.Input,args:["tdMarkdownNavigatorWindow"]}],disabled:[{type:e.Input}],click:[{type:e.HostListener,args:["click"]}]},t}();var M=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule,r.MatButtonModule,a.MatTooltipModule,i.MatListModule,l.MatIconModule,s.MatProgressBarModule,c.CovalentFlavoredMarkdownModule,d.CovalentDialogsModule],declarations:[w,y,S],exports:[w,y,S],providers:[I]}]}],t}();t.CovalentMarkdownNavigatorModule=M,t.DEFAULT_MARKDOWN_NAVIGATOR_LABELS=f,t.DEFAULT_MARKDOWN_NAVIGATOR_WINDOW_LABELS=k,t.TdMarkdownNavigatorComponent=w,t.TdMarkdownNavigatorWindowComponent=y,t.TdMarkdownNavigatorWindowService=I,t.ɵa=S,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=covalent-markdown-navigator.umd.min.js.map